# journalctl-Filter Übungen (108.2)

## Übung 1: Prioritätsfilterung

1. Zeige alle Journal-Einträge mit den Prioritäten `warning`, `error` und `critical` der letzten 2 Stunden an
2. Zeige nur Kernel-Nachrichten mit Priorität `error` und höher vom aktuellen Boot an
3. Filtere nach allen Einträgen mit Priorität `info` des SSH-Dienstes vom heutigen Tag

## Übung 2: Kombinierte Filter

1. Zeige alle Einträge des `cron.service` von gestern mit Priorität `warning` oder höher an
3. Filtere nach allen Einträgen mehrerer Services gleichzeitig: Zeige Logs von `ssh.service` und `apache2.service` der letzten 3 Stunden an. Installiere dazu zuerst den Apache2 mit `apt install apache2`.


## Übung 3: Ausgabe-Beschränkung und Pager

1. Zeige die letzten 50 Einträge des Journals an, ohne dass ein Pager (wie `less`) verwendet wird
2. Zeige die ersten 30 Einträge des aktuellen Boots an
3. Zeige die letzten 100 Kernel-Meldungen in umgekehrter Reihenfolge (älteste zuerst) an

## Übung 4: Filterung nach Executable, Identifier, PID, UID

1. Zeige alle Journal-Einträge an, die vom **Prozess** bzw. der **Executable** `/usr/sbin/cron` erzeugt wurden, nicht die vom **Unit** `cron`.
2. Filtere nach allen Einträgen mit dem Syslog-Identifier `sudo` der letzten 24 Stunden
3. Zeige alle Einträge, die vom `systemd`-Prozess selbst erzeugt wurden (dieser hat ja die PID 1...).
4. Filtere nach allen Einträgen eines bestimmten Users (nutze `_UID=<user-id>`)

## Übung 5: Bestimmte Einträge nicht anzeigen

1. Zeige alle Journal-Einträge der letzten Stunde an, aber **ohne** die Einträge des `systemd`-Services (nutze `grep -v`)
2. Zeige alle Logs mit Priorität `error` oder höher, aber **ohne** Kernel-Nachrichten (nutze `grep -v`)

## Übung 6: Grep-Integration mit journalctl

1. Zeige alle SSH-Logs an und filtere mit `grep` nach erfolgreichen Logins (Suche nach "Accepted")
2. Zeige alle Journal-Einträge des aktuellen Boots und filtere nach Einträgen, die "failed" oder "error" enthalten (case-insensitive)
3. Kombiniere mehrere Filter: Zeige systemd-Einträge der letzten 6 Stunden und suche nach Unit-Starts (Suche nach "Starting")

## Übung 7: Message Catalog

> [!NOTE]
> Der *Message Catalog* bietet zusätzliche Erklärungen zu Journal-Einträgen, wenn diese vom Entwickler hinterlegt wurden.

1. Nutze `journalctl --catalog` (oder `-x`) um Einträge mit zusätzlichen Erklärungstexten anzuzeigen
2. Zeige die letzten 20 Einträge mit vollständigen Catalog-Erklärungen an
3. Suche nach Einträgen mit der Priorität `error` der letzten 24 Stunden und aktiviere die Catalog-Anzeige

## Übung 8: Systemanalyse

Analysiere ein System-Problem:

1. Dein System hatte heute Morgen um 09:30 Uhr Performance-Probleme. Zeige alle Einträge zwischen 09:00 und 10:00 Uhr mit Priorität `warning` oder höher an
2. Filtere diese Ergebnisse nach Services, die "failed" im Text enthalten
3. Zeige zusätzlich alle Kernel-Meldungen aus diesem Zeitraum an
4. Exportiere alle relevanten Logs in eine Datei `/tmp/system-problem-$(date +%F).log` zur weiteren Analyse

## Übung 9: Feldliste und verfügbare Felder

1. Zeige alle verfügbaren Feldnamen an, die im Journal verwendet werden (`--fields`)
2. Zeige alle eindeutigen Werte für das Feld `_SYSTEMD_UNIT` an
3. Zeige alle eindeutigen Werte für das Feld `PRIORITY` an
4. Kombiniere: Zeige alle Services (`_SYSTEMD_UNIT`), die in den letzten 24 Stunden Einträge mit Priorität `3` (error) hatten

## Liste relevanter journalctl-Optionen für diese Übungen

**Zeitbasierte Filter:**

- `--since`, `-S`: Start-Zeitpunkt
- `--until`, `-U`: End-Zeitpunkt

**Prioritätsfilter:**

- `-p`, `--priority`: Prioritätsstufe (0-7 oder Namen)

**Service/Unit-Filter:**

- `-u`, `--unit`: Systemd-Unit
- `-t`, `--identifier`: Syslog-Identifier

**Feldbasierte Filter:**

- `_UID`: User-ID
- `_PID`: Prozess-ID
- `_COMM`: Kommando
- `_EXE`: Executable-Pfad
- `_SYSTEMD_UNIT`: Systemd-Unit
- `_TRANSPORT`: Transport-Mechanismus
- `MESSAGE_ID`: Message-ID

**Ausgabeoptionen:**

- `-n`, `--lines`: Anzahl der Zeilen
- `-r`, `--reverse`: Umgekehrte Reihenfolge
- `--no-pager`: Ohne Pager
- `-o`, `--output`: Ausgabeformat
- `-x`, `--catalog`: Mit Catalog-Text
- `-k`, `--dmesg`: Kernel-Nachrichten
- `-b`, `--boot`: Boot-spezifisch

**Weitere nützliche Optionen:**

- `--list-boots`: Alle Boots auflisten
- `--fields`: Alle Feldnamen anzeigen
- `-F`, `--field`: Eindeutige Werte eines Feldes
- `-f`, `--follow`: Echtzeit-Verfolgung
