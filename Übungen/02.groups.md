# User und Gruppen

>[!NOTE] 
> Die Übungen sind bewusst so aufgebaut, dass *Fehler* passieren. Folgt einfach den Übungen, obwohl ihr es vielleicht schon besser wisst, um diese *Fehler* einmal nachzumachen und so dafür sensibilisiert zu werden.
>
> Kommandos für diese Übungen:
>
> - `groupadd`
> - `usermod`
> - `groups`
> - `id`
> - `groupdel`
> - `chown` (wird später noch besprochen)

## Übung 1 Gruppe erstellen
Erstellt eine neue Gruppe `gfn` mit dem Kommando `groupadd gfn`. Schaut euch anschliessend die Datei `/etc/group` an. Analog zu `/etc/passwd` ist das die Datei in der die Gruppen konfiguriert werden. Hier sollte ein neuer Eintrag für `gfn` hinzugefügt worden sein.

## Übung 2 User einer Gruppe hinzufügen
Weist `karla` nun der Gruppe `gfn` zu. Das geht doch mit der Option `-G` von `usermod` oder? Also `usermod -G gfn karla`. 

Überprüft nun, welche Gruppenzugehörigkeiten `karla` hat. Das geht z.B. mit den Kommandos `groups` und `id` als `root` mit Angabe des Usernamens, also z.B. `groups karla`.

- Was ist der Unterschied zwischen den beiden Kommandos `groups` und `id`?
- Kann nur `root` damit die Gruppenzugehörigkeiten einzelner User prüfen?

## Übung 3 User einer weiteren Gruppe hinzufügen
Erstellt nun eine weitere Gruppe `adm` und weist `karla` dieser Gruppe zu, wieder mit `usermod -G adm karla`. Prüft die Gruppenzugehörigkkeiten von `karla` mit `groups` oder `id`.

Wir hatten `karla` doch vorhin auch der Gruppe `gfn` zugewiesen. Was ist passiert?

## Übung 4 Unterschied `-g` und `-G`
War `-G` vielleicht die falsche Option? Probiert es mal mit einem kleinen `g`, also `usermod -g gfn karla`. Führt vor und nach diesem Kommando das Kommando `groups karla` aus und vergleicht die Ausgaben. 

- Was machen also die Optionen `-g` und `-G`? Was ist der Unterschied? Schaut dazu in die Manpage von `usermod`.
- Was ist der Unterschied zwischen einer *primären* und einer *zusätzlichen* Gruppe? Recherchiert das ggf. im Internet.

## Übung 5 User einer zusätzlichen Gruppe hinzufügen
Schaut in der Manpage von `usermod` nach, wie man einen User auf korrekte Art und Weise einer zusätzlichen/*supplementary* Gruppe hinzufügt, ohne eventuelle bestehende Gruppenzugehörigkkeiten zu löschen.

`karla` soll beiden Gruppen, `gfn` und `adm` angehören. Korrigiert die Situation entsprechend.

## Übung 6 Gruppe löschen
Versucht die Gruppe `gfn` zu löschen obwohl sie Mitglieder hat. Klappt das?

## Übung 7 User einer neuen Gruppe hinzufügen
Weist den User `karla` der neuen Gruppe `circle` hinzu. Muss die Gruppe dafür existieren oder wird sie automatisch erstellt?

## Übung 8 User inklusive Heimatverzeichnis löschen

>[!NOTE] 
> Die gleiche Übung gibt es auch bei den Übungen zu `useradd`. Macht sie also nur, falls ihr sie da nicht eh schon gemacht habt.

Erstellt eine Datei mit Namen `karlos-file` im Verzeichnis `/opt` als `root`. Sorgt nun mit dem Kommando `chown karlos /opt/karlos-file` dafür, dass diese Datei `karlos` gehört bzw. zugewiesen wird (`chown` besprechen wir noch).

Löscht nun den User `karlos` inklusive seines Heimatverzeichnisses mit dem Kommando `userdel` und der entsprechenden Option (-> Manpage). Sind anschließend in jedem Fall alle Dateien, die `karlos` "gehören" entfernt? Schaut einmal mit `ls -l` in das Verzeichnis `/opt`. 
